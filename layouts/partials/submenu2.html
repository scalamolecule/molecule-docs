<nav class="bs-docs-sidebar" id="myScrollspy">
  <ul class="bs-docs-sidenav nav">{{ $currentNode := . }}
    {{ range where .Site.Menus.main "Identifier" .Section }}
      {{ if .HasChildren }}
        {{ if .Params.anchors }}
          <!-- Custom rendering of anchors instead of sub-pages -->
          {{ range .Children }}
            <!-- Page -->
            {{if $currentNode.IsMenuCurrent "main" . }}
              <li class="active" aria-current="page"><b><a href="#top">{{ .Name }}</a></b></li>
              {{ if .Page }}
                {{ .Page.TableOfContents }}
              {{ end }}
            {{else}}
              <li><a href="{{ .URL }}">{{ .Name }}</a></li>
            {{end}}
          {{end}}
        {{else}}
          <!-- Render all sub-pages -->
          {{ range .Children }}
            {{if $currentNode.IsMenuCurrent "main" . }}
              <li class="active" aria-current="page"><b>{{ .Name }}</b></li>
            {{else}}
              <li><a href="{{ .URL }}">{{ .Name }}</a></li>
            {{end}}
            {{if .HasChildren}}
              <ul class="level2">
                {{ range .Children }}
                  {{if $currentNode.IsMenuCurrent "main" . }}
                  <li class="active"><b>{{ .Name }}</b></li>
                  {{else}}
                  <li><a class="sub" href="{{ .URL }}">{{ .Name }}</a></li>
                  {{end}}
                {{end}}
              </ul>
            {{end}}
          {{end}}
        {{end}}
      {{end}}
    {{end}}
  </ul>
</nav>